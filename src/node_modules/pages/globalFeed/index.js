import React, {useEffect,useContext} from 'react'


import Attension from 'modal/attension'

import {CurrentUserContext} from 'contexts/currentUser'



const GlobalFeed = () => {
 
const [currentUserState, setCurrentUserState] = useContext(CurrentUserContext)
   
const isHome = localStorage.tokenName

// soburboris@ger.ru

const {isLogged} = currentUserState
useEffect(() => {
    if (!isHome) {
        
        setCurrentUserState(state => ({
            ...state,
            isLogged:false
        }))
        
    } 
    setCurrentUserState(state => ({
        ...state,
        isLogged:true
    }))
    
    
    
},[setCurrentUserState,isHome])



console.log('loggin',currentUserState)

   return (
    <React.Fragment>
           

            {isHome && <div>GlobalFeed</div>}
        
            {  isLogged &&
            <Attension 
            name={isHome}
            
            onHide={()=> {
                
                setCurrentUserState(state => ({
                    ...state,
                    isLogged:false
                }))
                localStorage.removeItem('tokenName')
                localStorage.removeItem('token')
            }}          
            />

            }
         
    </React.Fragment>
       
)}
export default GlobalFeed