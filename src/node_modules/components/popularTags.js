import React, {useEffect} from 'react'

import useFetch from 'hooks/useFetch'
import { Link } from 'react-router-dom'
import * as R from 'ramda'

const PopularTags = () => {
    const [{response, isLoading, error}, doFetch] = useFetch('/tags')
    
    useEffect(() => {
        doFetch()
    },[doFetch])

    if(isLoading) {

        return <div>Loading...</div>      
    }
    if(error) {
        return <div>Sometimes errors happend</div>      
    }   
    if (response) {
     
        const isNot= x => x !== 'HuManIty';

        const result = R.dropWhile(isNot, response.tags); 
        // const result = R.reject(R.equals(""),(response.tags));
       

        return (
            <div className='sidebar'>
                <p>popular Tags</p>
                <table className=' table table-sm' >
                    <tbody>
                                {result.map(map => {
                                  
                                     return (
                                        <tr key={map}>
                                            <td>
                                            
                                                { <Link to={`/tags/${map}`} >{map}</Link>
                                                 }   
                                            </td>
                                            
                                        </tr>)
                                })
                                     }
                                                   
                      
                    </tbody>
                </table>
            </div>
            
        )
        
    }

    return <div></div>

    
  
}

export default PopularTags