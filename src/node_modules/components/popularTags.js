import React, {useEffect} from 'react'

import useFetch from 'hooks/useFetch'
import { Link } from 'react-router-dom'
import * as R from 'ramda'

const PopularTags = () => {
    const [{response, isLoading, error}, doFetch] = useFetch('/tags')
    
    useEffect(() => {
        doFetch()
    },[doFetch])

    if(isLoading || !response) {

        return <div>Loading...</div>      
    }
    if(error) {
        return <div>Sometimes errors happend</div>      
    }   
    
     
        const isNot= x => x !== 'HuManIty';
    // console.log('isNot', isNot)
        const result = R.dropWhile(isNot, response.tags); 
        // const result = R.reject(R.equals(""),(response.tags));
       

        return (
            <div className='sidebar'>
                <p>popular Tags</p>
                <table className=' table table-sm' >
                    <tbody>
                                {result.map(tag => {
                                  
                                     return (
                                        <tr key={tag}>
                                            <td>
                                            
                                                { <Link to={`/tags/${tag}`} >{tag}</Link>
                                                 }   
                                            </td>
                                            
                                        </tr>)
                                })
                                     }
                                                   
                      
                    </tbody>
                </table>
            </div>
            
        )
   

    
  
}

export default PopularTags