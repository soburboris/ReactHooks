 import React from "react"
 import classNames from 'classnames'

 import useFetch from 'hooks/useFetch'


 const AddToFavorites = ({isFavorited, favoritesCount, slug}) => {

    const apiURL = `/articles/${slug}/favorite`
    const [{response}, doFetch] = useFetch(apiURL)
    
    const favoriteWithResponse = response ? response.article.favorited : isFavorited

    const favoriteCountWithResponse = response ? response.article.favoritesCount : favoritesCount

    const buttonClasses = classNames({
        btn: true,
        'btn-sm': true,
        'btn-primary': favoriteWithResponse,
        'btn-outline-primary': !favoriteWithResponse
      })

    const handleLike = event=> {
        event.preventDefault()
        doFetch({
            method: favoriteWithResponse ? 'delete' : 'post'
        })
    }

    // useEffect(() => {
      
    // },[respnose])

    

     return (
            <button className={buttonClasses} onClick={handleLike}>
                <i className='ion-heart'></i>
                <span>&nbsp; {favoriteCountWithResponse}</span>
            </button>
        )
 }

 export default AddToFavorites