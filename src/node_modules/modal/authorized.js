
import React, { useContext, useState, Fragment, useEffect } from 'react'
import { Redirect } from 'react-router-dom'

import 'modal/attension.css'
import { CurrentUserContext } from 'contexts/currentUser'

import useLocalStorage from 'hooks/useLocalStorage'






const Authorized = () => {
    // const [go, setGo] = useState(false)
    const [token, setToken] = useLocalStorage('token')
    const [{ isLogged, isLoading, isAuthorized }, dispatch] = useContext(CurrentUserContext)

 


    return (
        <Fragment>

            {!isLogged && !isLoading && !isAuthorized && !token && 
                <div className='container'>
                    <div className='col-md-10 offset-md-2 modals'>

                        <h2 >Вам необходимо авторизироваться! <button className='btn btn-primary btn-sm' onClick={() => {
                            dispatch({ type: 'AUTHORIZED' })
                           
                        }
                        }>GO</button> </h2>


                    </div>
                </div>
            }
            {isAuthorized && <Redirect to='/login' />}
        </Fragment>
    )
}


export default Authorized